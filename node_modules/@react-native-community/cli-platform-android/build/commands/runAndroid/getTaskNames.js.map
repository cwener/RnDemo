{"version":3,"names":["getTaskNames","appName","mode","tasks","taskPrefix","sourceDir","appTasks","toPascalCase","actionableInstallTasks","getGradleTasks","find","t","task","includes","installTasksForMode","filter","toLowerCase","length","CLIError","map","taskName","replace","join","logger","warn","command"],"sources":["../../../src/commands/runAndroid/getTaskNames.ts"],"sourcesContent":["import {toPascalCase} from './toPascalCase';\nimport type {BuildFlags} from '../buildAndroid';\nimport {getGradleTasks} from './listAndroidTasks';\nimport {CLIError, logger} from '@react-native-community/cli-tools';\n\nexport function getTaskNames(\n  appName: string,\n  mode: BuildFlags['mode'] = 'debug',\n  tasks: BuildFlags['tasks'],\n  taskPrefix: 'assemble' | 'install',\n  sourceDir: string,\n): Array<string> {\n  let appTasks = tasks || [taskPrefix + toPascalCase(mode)];\n\n  // Check against build flavors for \"install\" task (\"assemble\" don't care about it so much and will build all)\n  if (!tasks && taskPrefix === 'install') {\n    const actionableInstallTasks = getGradleTasks('install', sourceDir);\n    if (!actionableInstallTasks.find((t) => t.task.includes(appTasks[0]))) {\n      const installTasksForMode = actionableInstallTasks.filter((t) =>\n        t.task.toLowerCase().includes(mode),\n      );\n      if (!installTasksForMode.length) {\n        throw new CLIError(\n          `Couldn't find \"${appTasks\n            .map((taskName) => taskName.replace(taskPrefix, ''))\n            .join(\n              ', ',\n            )}\" build variant. Available variants are: ${actionableInstallTasks\n            .map((t) => `\"${t.task.replace(taskPrefix, '')}\"`)\n            .join(', ')}.`,\n        );\n      }\n      logger.warn(\n        `Found multiple tasks for \"install\" command: ${installTasksForMode\n          .map((t) => t.task)\n          .join(', ')}.\\nSelecting first available: ${\n          installTasksForMode[0].task\n        }.`,\n      );\n      appTasks = [installTasksForMode[0].task];\n    }\n  }\n\n  return appName\n    ? appTasks.map((command) => `${appName}:${command}`)\n    : appTasks;\n}\n"],"mappings":";;;;;;AAAA;AAEA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEO,SAASA,YAAY,CAC1BC,OAAe,EACfC,IAAwB,GAAG,OAAO,EAClCC,KAA0B,EAC1BC,UAAkC,EAClCC,SAAiB,EACF;EACf,IAAIC,QAAQ,GAAGH,KAAK,IAAI,CAACC,UAAU,GAAG,IAAAG,0BAAY,EAACL,IAAI,CAAC,CAAC;;EAEzD;EACA,IAAI,CAACC,KAAK,IAAIC,UAAU,KAAK,SAAS,EAAE;IACtC,MAAMI,sBAAsB,GAAG,IAAAC,gCAAc,EAAC,SAAS,EAAEJ,SAAS,CAAC;IACnE,IAAI,CAACG,sBAAsB,CAACE,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,CAACC,QAAQ,CAACP,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACrE,MAAMQ,mBAAmB,GAAGN,sBAAsB,CAACO,MAAM,CAAEJ,CAAC,IAC1DA,CAAC,CAACC,IAAI,CAACI,WAAW,EAAE,CAACH,QAAQ,CAACX,IAAI,CAAC,CACpC;MACD,IAAI,CAACY,mBAAmB,CAACG,MAAM,EAAE;QAC/B,MAAM,KAAIC,oBAAQ,EACf,kBAAiBZ,QAAQ,CACvBa,GAAG,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,OAAO,CAACjB,UAAU,EAAE,EAAE,CAAC,CAAC,CACnDkB,IAAI,CACH,IAAI,CACJ,4CAA2Cd,sBAAsB,CAClEW,GAAG,CAAER,CAAC,IAAM,IAAGA,CAAC,CAACC,IAAI,CAACS,OAAO,CAACjB,UAAU,EAAE,EAAE,CAAE,GAAE,CAAC,CACjDkB,IAAI,CAAC,IAAI,CAAE,GAAE,CACjB;MACH;MACAC,kBAAM,CAACC,IAAI,CACR,+CAA8CV,mBAAmB,CAC/DK,GAAG,CAAER,CAAC,IAAKA,CAAC,CAACC,IAAI,CAAC,CAClBU,IAAI,CAAC,IAAI,CAAE,iCACZR,mBAAmB,CAAC,CAAC,CAAC,CAACF,IACxB,GAAE,CACJ;MACDN,QAAQ,GAAG,CAACQ,mBAAmB,CAAC,CAAC,CAAC,CAACF,IAAI,CAAC;IAC1C;EACF;EAEA,OAAOX,OAAO,GACVK,QAAQ,CAACa,GAAG,CAAEM,OAAO,IAAM,GAAExB,OAAQ,IAAGwB,OAAQ,EAAC,CAAC,GAClDnB,QAAQ;AACd"}